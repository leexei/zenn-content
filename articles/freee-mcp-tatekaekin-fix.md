---
title: "freee MCP × Claude Codeで立替金のマイナス残高を解決した話"
emoji: "💰"
type: "tech"
topics: ["claudecode", "freee", "mcp", "ai", "accounting"]
published: true
---

## はじめに

こんにちは！ミミだよ〜✨

今日は **freee の勘定科目「立替金」がマイナス残高になってる問題** を、Claude Code + freee MCP で調査して解決した話をするね！

![freee MCP で経理問題を解決](/images/freee-mcp-tatekaekin-fix/cover.webp)

確定申告の時期、こういうアラートが出て困ってる人もいるんじゃないかな？

## 問題：立替金の残高がマイナス！？

freee の総勘定元帳を見てたら、こんなアラートが出てた：

> ⚠️ 勘定科目「立替金」の残高がマイナスになっています。

立替金がマイナスってことは、**立替払いした金額より、回収した金額の方が多い**状態。

これはおかしい...🤔

## Claude Code + freee MCP で調査開始

### freee MCP とは

Claude Code には MCP（Model Context Protocol）という仕組みがあって、外部サービスの API を直接叩ける。

freee MCP を使えば：

- 取引データの取得
- 勘定科目の検索
- 仕訳の分析

などが、自然言語で指示するだけでできちゃう！

### Step 1: 立替金の年間サマリを取得

まず、2025年の立替金の動きを確認：

```
立替金（2025年）:
・期首残高:     0円
・借方（立替）: 130,956円
・貸方（回収）: 160,586円
・期末残高:    -29,630円 ← マイナス！
```

**回収が約3万円多い**ことが判明。

### Step 2: 個別取引を取得して突合

次に、立替払い（借方）と請求書での回収（貸方）を突合してみた。

freee API で取引を取得：

```javascript
// freee MCP で立替金の取引を取得
GET /api/1/deals
  ?account_item_id=883032387  // 立替金のID
  &start_issue_date=2025-01-01
  &end_issue_date=2025-12-31
```

### Step 3: 突合表を作成

取得したデータを整理して、立替払いと請求書を照合：

| 請求書 | 回収額 | 対応する立替払い | 立替額 | 差額 |
|--------|--------|------------------|--------|------|
| INV-10 | 16,349 | 4件 | 14,863 | +1,486 |
| INV-13 | 36,043 | 4件 | 37,529 | 0 ✅ |
| **INV-14** | **37,914** | **なし！** | **0** | **+37,914** |
| INV-17 | 68,794 | 4件 | 68,794 | 0 ✅ |

## 原因発見！🎯

**INV-14「9月DBサーバー: 37,914円」の立替払いが記録されていない！**

つまり：
- 請求書で回収した（貸方に計上）
- でも元の立替払いが未記録（借方がない）

だからマイナスになってたんだ！

### 差額の検算

```
期末残高: -29,630円
+ 記録漏れ: 37,914円
= 本来の残高: +8,284円

この +8,284円 は：
- OpenAI 3,378円（未請求）
- Vercel 4,906円（翌年請求予定）
= 8,284円 ✅ 一致！
```

## 解決方法

### 1. 年度締めの巻き戻し

2025年度は既に締めてたので、まず巻き戻し：

```
freee → 設定 → 年度締め → 巻き戻し
```

### 2. 立替払いを追加

抜けていた取引を登録：

```
日付: 2025-10-02（AWS請求日）
借方: 立替金 37,914円
貸方: 事業主借（プライベート資金）
税区分: 課対仕入10%
摘要: AWS 9月分DBサーバー
```

### 3. 残高確認

登録後、残高が **+8,284円** になった！🎉

これで「修正済みの項目です」と表示されるようになった。

## 確定申告への影響は？

心配になるところだけど...

| 項目 | 影響 |
|------|------|
| **所得税** | 影響なし（立替金は資産科目、損益に影響しない） |
| **消費税（免税事業者）** | 影響なし |
| **消費税（課税事業者）** | 仕入税額控除が変わる可能性あり |

免税事業者なら、**帳簿を直すだけで修正申告は不要**！

## freee MCP でできること

今回使った機能：

1. **勘定科目の検索** - IDや名前で科目を特定
2. **残高試算表の取得** - 年間の借方/貸方サマリ
3. **取引一覧の取得** - 詳細な仕訳データ
4. **取引の登録** - 新しい仕訳を追加

これらを組み合わせれば、経理の問題解決がかなり効率化できる！

## ユースケース

1. **勘定科目の残高異常チェック**
   - マイナス残高の検出
   - 前年比較での異常値検出

2. **仕訳の突合・照合**
   - 請求書と入金の突合
   - 立替金と回収の照合

3. **月次レポートの自動生成**
   - 売上・経費のサマリ
   - キャッシュフロー分析

## まとめ

立替金のマイナス残高問題、**Claude Code + freee MCP で原因特定から解決まで**できちゃった！😊

- freee MCP で取引データを取得
- 立替払いと請求書を突合
- 記録漏れを発見 → 修正

手動でやると大変な突合作業も、AIにやらせれば一瞬！

経理で困ったら、Claude Code に相談してみてね〜💕

---

**ミミより** 💕

## 参考リンク

- [freee API リファレンス](https://developer.freee.co.jp/docs/accounting)
- [freee MCP セットアップ記事](https://zenn.dev/leexei/articles/freee-mcp-setup-with-claude-code)
- [Model Context Protocol](https://modelcontextprotocol.io/)
